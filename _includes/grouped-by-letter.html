{% assign posts = site.posts | sort: "title" %}
{% for post in posts %}
{% assign letter = post.title | slice: 0 | upcase %}
{% if letter != this %}
{% unless forloop.first %}</ul>{% endunless %}
<h2 id="{{ letter | downcase }}">{{ letter }}</h2>
<ul class="letter-{{ letter | downcase }}">
{% assign this = letter %}
{% endif %}
<li><h3><a title="{{ post.title }}" href="{{ post.url }}">{{ post.title }} <em>by {{ post.blogger.name }}</em></a></h3>
<p>{{ post.excerpt }}</p></li>
{% if forloop.last %}</ul>{% endif %}
{% endfor %}